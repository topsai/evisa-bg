{% extends "sb2/base.html" %}
{% block css %}
    <link href="/static/css/bootstrap-datepicker.min.css" rel="stylesheet" media="screen">
    <link href="/static/css/bootstrap-datepicker3.min.css" rel="stylesheet" media="screen">
    <style>
        .indexbox {
            width: 100%;
            margin: 0 auto;
        }

        .index_input {
            width: 200px;
        }

        .maxbutton {
            border-radius: 90px;
        }

        .sum-index {
            text-align: center;
        }

        ul {
            padding: 0;
            margin: 0;
            list-style: none;
        }

        .infobox {
            width: 100%;
        }

        input::-webkit-input-placeholder {
            font-size: 0.8rem;
        }

        input::-moz-placeholder { /* Mozilla Firefox 19+ */
            font-size: 0.8rem;
        }

        input:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
            font-size: 0.8rem;
        }

        input:-ms-input-placeholder { /* Internet Explorer 10-11 */
            font-size: 0.8rem;
        }

        textarea {
            font-size: 0.8rem;
        }

        .infobox li {
            border: 1px solid #f90;
            font-size: 12px;
            width: 33%;
            float: left;
        }

        .row-img {
            width: 49%;
            height: 7rem;
            border: 1px dotted #ccc;
            margin-bottom: 1rem !important;
        }

        .row-p {
            text-align: center;
        }

        .text-primary {
            color: #999 !important;
        }

        .card-header {
            color: #4e73df !important;
        }

        .img-size {
            font-size: 2rem;
        }

        #prompt3 {
            width: 100%;
            height: 180px;
            text-align: center;
            position: relative;
        }

        #imgSpan {
            position: absolute;
            top: 20px;
            left: 45%;
            text-align: center;
        }

        .filepath {
            width: 100%;
            height: 40%;
            opacity: 0;
        }

        #img3 {
            height: 100%;
            width: 100%;
            display: none;
        }

        .info-btn {
            position: absolute;
            top: 0;
            right: 0;
        }

        .over {
            position: relative;
        }

        #finish {
            display: none;
        }

        .info-hot {
            color: indianred;
        }

        label {
            margin-bottom: 1.5rem;
        }

        /*.card-header{
          background:#d9edf7;
        }*/
    </style>
{% endblock %}
{% block content %}

    {#    粘贴进来的文件sta  #}
    <div id="content-wrapper">

        <div class="container-fluid indexbox">

            <!-- Breadcrumbs-->
            {#        <div class="card-header">#}
            {#            <i class="fas fa-table"></i>#}
            {#            签注进度查询#}
            {#        </div>#}
            <div class="card mb-3">
                <div class="card-header">
                    <i class="fas fa-table"></i>
                    基本资料
                </div>
                <!-- 标题栏 end-->

                <div class="card-body">
                    <p class="mb-0 small info-hot">*接受文件类型:pdf,jpg,jpeg,png,bmp，请确保文件大小大于100KB，小于2MB</p>
                    <div class="row">
                        <!-- Grow In Utility -->
                        <div class="col-lg-4">

                            <div class="card position-relative">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">上传护照信息</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="small mb-6 row-img over">
                                            <!-- <i class="fa fa-camera-retro img-size"></i><br/> -->
                                            <div id="imgPreview">
                                                <div id="prompt3">
                                     <span id="imgSpan">
                                     <i class="fa fa-camera-retro img-size"></i>
                                       <br/>
                                     </span>
                                                    <input name="passportphoto[]" type="file" class="filepath"
                                                           onchange="changepic(this)"
                                                           accept="image/jpg,image/jpeg,image/png,image/PNG">
                                                    <input name="passportphoto1" class="up" style="display: none">
                                                    <p>护照封面</p>
                                                </div>
                                                <img src="#" id="img3"/>
                                            </div>

                                            <button id="finish" type="button"
                                                    class="btn  btn-circle btn-success info-btn"><i
                                                    class="fa fa-check"></i>
                                            </button>
                                        </div>

                                        <div class="small mb-6 row-img over">
                                            <div id="imgPreview">
                                                <div id="prompt3">
                                                     <span id="imgSpan">
                                                     <i class="fa fa-camera-retro img-size"></i>
                                                       <br/>
                                                         <!--AUI框架中的图标-->
                                                     </span>
                                                    <input name="passportphoto[]" passport="true" value="" type="file"
                                                           id="file"
                                                           class="filepath" onchange="changepic(this)"
                                                           accept="image/jpg,image/jpeg,image/png,image/PNG">
                                                    <input name="passportphoto2" class="up" style="display: none">
                                                    <p>护照个人信息页</p>
                                                </div>
                                            </div>

                                            <button id="finish" type="button"
                                                    class="btn  btn-circle btn-success info-btn"><i
                                                    class="fa fa-check"></i></button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="card position-relative">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">上传机票行程单</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="small mb-6 row-img over">
                                            <!-- <i class="fa fa-camera-retro img-size"></i><br/> -->
                                            <div id="imgPreview">
                                                <div id="prompt3">
                                   <span id="imgSpan">
                                   <i class="fa fa-camera-retro img-size"></i>
                                     <br/>
                                       <!--AUI框架中的图标-->
                                   </span>
                                                    <input name="ticketphoto[]" value="1111" type="file" id="file"
                                                           class="filepath" onchange="changepic(this)"
                                                           accept="image/jpg,image/jpeg,image/png,image/PNG">
                                                    <input name="ticketphoto1" class="up" style="display: none">
                                                    <p>上传到达机票</p>
                                                </div>
                                            </div>
                                            <button id="finish" type="button"
                                                    class="btn  btn-circle btn-success info-btn"><i
                                                    class="fa fa-check"></i></button>
                                        </div>

                                        <div class="small mb-6 row-img over">
                                            <div id="imgPreview">
                                                <div id="prompt3">
                                   <span id="imgSpan">
                                   <i class="fa fa-camera-retro img-size"></i>
                                     <br/>
                                       <!--AUI框架中的图标-->
                                   </span>
                                                    <input name="ticketphoto[]" value="1111" type="file" id="file"
                                                           class="filepath" onchange="changepic(this)"
                                                           accept="image/jpg,image/jpeg,image/png,image/PNG">
                                                    <input name="ticketphoto2" class="up" style="display: none">
                                                    <p>上传返回机票</p>
                                                </div>
                                            </div>
                                            <button id="finish" type="button"
                                                    class="btn  btn-circle btn-success info-btn"><i
                                                    class="fa fa-check"></i></button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div class="card position-relative">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">上传酒店信息</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="small mb-6 row-img over">
                                            <!-- <i class="fa fa-camera-retro img-size"></i><br/> -->
                                            <div id="imgPreview">
                                                <div id="prompt3">
                                   <span id="imgSpan">
                                   <i class="fa fa-camera-retro img-size"></i>
                                     <br/>
                                       <!--AUI框架中的图标-->
                                   </span>
                                                    <input name="accomodationphoto[]" value="aaa" type="file" id="file"
                                                           class="filepath" onchange="changepic(this)"
                                                           accept="image/jpg,image/jpeg,image/png,image/PNG">
                                                    <input name="accomodationphoto1" class="up" style="display: none">
                                                    <p>上传酒店信息</p>
                                                </div>
                                            </div>
                                            <button id="finish" type="button"
                                                    class="btn  btn-circle btn-success info-btn"><i
                                                    class="fa fa-check"></i></button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    {#            <div style=" float: right; margin-top:1rem;">#}
                    {#              <a href="#" class="btn btn-success btn-icon-split"><span class="icon text-white-50"> <i class="fas fa-check"></i> </span>#}
                    {#                  <span class="text">全部上传</span>#}
                    {#              </a>#}
                    {#             </div>#}
                </div>
                <!-- 上传信息 end-->

                <div class="card-body">

                    <div class="row">
                        <!-- Grow In Utility -->
                        <div class="col-lg-12">
                            <div class="card position-relative">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">签证信息</h6>
                                </div>
                                <div class="card-body row">

                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>到达机场<br/>  <!-- 到达机场 -->
                                            <select name="airport" id="airport" required=""
                                                    class="custom-select custom-select-sm form-control form-control-sm up">
                                                <option value="">Select</option>
                                                <option value="bkk" selected="selected">BKK - Suvarnabhumi</option>
                                                <option value="dmk">DMK - Don Mueang</option>
                                                <option value="hkt">HKT - Phuket</option>
                                                <option value="cnx">CNX - Chiang Mai</option>
                                            </select></label>
                                    </div>

                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>到达日期<br/>  <!-- 到达日期 -->
                                            <input name="arrivalDate" type="text"
                                                   class="form-control datepicker up" placeholder="请选择日期" value="">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>到达时间<br/>  <!-- 到达时间 -->
                                            <input name="arrivalTime" type="text"
                                                   class="form-control up" value=""
                                                   placeholder="到达时间">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>到达航班号<br/>  <!-- 到达航班号 -->
                                            <input id="arrivalNum" name="arrivalNum" type="text" class="form-control up"
                                                   value=""
                                                   placeholder="到达航班号">
                                        </label>
                                    </div>

                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>离开日期<br/>  <!-- 离开日期 -->
                                            <input id="departureDate" name="departureDate" type="text"
                                                   class="form-control datepicker" value=""
                                                   placeholder="离开日期">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>离开时间<br/>  <!-- 离开时间 -->
                                            <input id="departureTime" name="departureTime" type="text"
                                                   class="form-control up" value=""
                                                   placeholder="离开时间">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>离开航班号<br/>  <!-- 离开航班号 -->
                                            <input id="departureNum" name="departureNum" type="text"
                                                   class="form-control up" value=""
                                                   placeholder="离开航班号">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3"> <!-- 住宿类型 -->
                                        <label>住宿类型<br/>
                                            <select class="form-control up" name="accomodation" id="js-place-of-stay"
                                                    required="">
                                                <option value="">选择</option>
                                                <option value="hotel">Hotel</option>
                                                <option value="hostel">Hostel</option>
                                                <option value="guesthouse">Guesthouse</option>
                                                <option value="private_property">Private Property</option>
                                                <option value="dormitory">Dormitory</option>
                                            </select>
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>手机号码<br/>
                                            <input id="mobileNum" name="mobileNum" type="text"
                                                   class="form-control up"
                                                   placeholder="+86 18636987415">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>邮箱地址<br/>
                                            <input name="email" type="text" class="form-control up" value=""
                                                   placeholder="邮箱">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>住址信息<br/>
                                            <textarea name="residential_address" rows="3" cols="50"
                                                      class="form-control up" placeholder=""></textarea>
                                        </label>
                                    </div>

                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>住宿名称（要求）<br/>
                                            <input name="pos_name" type="text" class="form-control up" value=""
                                                   placeholder="住宿名称">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>城市/省份<br/>

                                            <select name="pos_city_province" class="form-control up">
                                                <option value="" selected="selected">Select</option>
                                                <option value="Amnat Charoen">Amnat Charoen</option>

                                                <option value="Ang Thong">Ang Thong</option>

                                                <option value="Bangkok">Bangkok</option>

                                                <option value="Bueng Kan">Bueng Kan</option>

                                                <option value="Buriram">Buriram</option>

                                                <option value="Chachoengsao">Chachoengsao</option>

                                                <option value="Chai Nat">Chai Nat</option>

                                                <option value="Chaiyaphum">Chaiyaphum</option>

                                                <option value="Chanthaburi ">Chanthaburi</option>

                                                <option value="Chiang Mai">Chiang Mai</option>

                                                <option value="Chiang Rai">Chiang Rai</option>

                                                <option value="Chonburi">Chonburi</option>

                                                <option value="Chumphon ">Chumphon</option>

                                                <option value="Kalasin">Kalasin</option>

                                                <option value="Kamphaeng Phet">Kamphaeng Phet</option>

                                                <option value="Kanchanaburi">Kanchanaburi</option>

                                                <option value="Khon Kaen">Khon Kaen</option>

                                                <option value="Krabi">Krabi</option>

                                                <option value="Lampang">Lampang</option>

                                                <option value="Lamphun ">Lamphun</option>

                                                <option value="Loei">Loei</option>

                                                <option value="Lopburi">Lopburi</option>

                                                <option value="Mae Hong Son">Mae Hong Son</option>

                                                <option value="Maha Sarakham">Maha Sarakham</option>

                                                <option value="Mukdahan">Mukdahan</option>

                                                <option value="Nakhon Nayok ">Nakhon Nayok</option>

                                                <option value="Nakhon Pathom">Nakhon Pathom</option>

                                                <option value="Nakhon Phanom">Nakhon Phanom</option>

                                                <option value="Nakhon Ratchasima">Nakhon Ratchasima</option>

                                                <option value="Nakhon Sawan ">Nakhon Sawan</option>

                                                <option value="Nakhon Si Thammarat">Nakhon Si Thammarat</option>

                                                <option value="Nan">Nan</option>

                                                <option value="Narathiwat">Narathiwat</option>

                                                <option value="Nong Bua Lamphu ">Nong Bua Lamphu</option>

                                                <option value="Nong Khai">Nong Khai</option>

                                                <option value="Nonthaburi">Nonthaburi</option>

                                                <option value="Pathum Thani">Pathum Thani</option>

                                                <option value="Pattani">Pattani</option>

                                                <option value="Phang Nga">Phang Nga</option>

                                                <option value="Phatthalung">Phatthalung</option>

                                                <option value="Phayao">Phayao</option>

                                                <option value="Phetchabun">Phetchabun</option>

                                                <option value="Phetchaburi">Phetchaburi</option>

                                                <option value="Phichit">Phichit</option>

                                                <option value="Phitsanulok">Phitsanulok</option>

                                                <option value="Phra Nakhon Si Ayutthaya ">Phra Nakhon Si Ayutthaya
                                                </option>

                                                <option value="Phrae">Phrae</option>

                                                <option value="Phuket">Phuket</option>

                                                <option value="Prachinburi">Prachinburi</option>

                                                <option value="Prachuap Khiri Khan">Prachuap Khiri Khan</option>

                                                <option value="Ranong">Ranong</option>

                                                <option value="Ratchaburi">Ratchaburi</option>

                                                <option value="Rayong ">Rayong</option>

                                                <option value="Roi Et">Roi Et</option>

                                                <option value="Sa Kaeo">Sa Kaeo</option>

                                                <option value="Sakon Nakhon">Sakon Nakhon</option>

                                                <option value="Samut Prakan">Samut Prakan</option>

                                                <option value="Samut Sakhon">Samut Sakhon</option>

                                                <option value="Samut Songkhram">Samut Songkhram</option>

                                                <option value="Saraburi">Saraburi</option>

                                                <option value="Satun">Satun</option>

                                                <option value="Sing Buri">Sing Buri</option>

                                                <option value="Sisaket">Sisaket</option>

                                                <option value="Songkhla">Songkhla</option>

                                                <option value="Sukhothai">Sukhothai</option>

                                                <option value="Suphan Buri">Suphan Buri</option>

                                                <option value="Surat Thani">Surat Thani</option>

                                                <option value="Surin">Surin</option>

                                                <option value="Tak">Tak</option>

                                                <option value="Trang">Trang</option>

                                                <option value="Trat">Trat</option>

                                                <option value="Ubon Ratchathani ">Ubon Ratchathani</option>

                                                <option value="Udon Thani">Udon Thani</option>

                                                <option value="Uthai Thani">Uthai Thani</option>

                                                <option value="Uttaradit">Uttaradit</option>

                                                <option value="Yala">Yala</option>

                                                <option value="Yasothon">Yasothon</option>
                                            </select>
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>区<br/>
                                            <select name="pos_district" class="form-control up">
                                                <option class="js-pos-default" value="">Select</option>


                                                <option value="Chanuman">Chanuman</option>

                                                <option value="Hua Taphan">Hua Taphan</option>

                                                <option value="Lue Amnat ">Lue Amnat</option>

                                                <option value="Mueang Amnat Charoen">Mueang Amnat Charoen</option>

                                                <option value="Pathum Ratchawongsa">Pathum Ratchawongsa</option>

                                                <option value="Phana ">Phana</option>

                                                <option value="Senangkhanikhom">Senangkhanikhom</option>
                                            </select>
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>邮政编码<br/>
                                            <input name="pos_postcode" type="text" class="form-control up" value=""
                                                   placeholder="邮政编码">
                                        </label>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- 输入联系信息 end -->

                <div class="card-body">

                    <div class="row">
                        <!-- Grow In Utility -->
                        <div class="col-lg-12">

                            <div class="card position-relative">
                                <div class="card-header py-3">
                                    <h6 class="m-0 font-weight-bold text-primary">确认个人信息</h6>
                                </div>
                                <div class="card-body row">
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>姓<br/> <!-- 姓 -->
                                            <input id="lastName" name="lastName" type="text" class="form-control up"
                                                   value=""
                                                   placeholder="姓">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>名<br/>  <!-- 名 -->
                                            <input id="firstName" name="firstName" type="text" class="form-control up"
                                                   value=""
                                                   placeholder="名">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>称谓<br/>  <!-- 称谓 -->
                                            <input id="salutation" name="salutation" type="text" class="form-control up"
                                                   value="mr"
                                                   placeholder="称谓">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>性别<br/>  <!-- 性别 -->
                                            <input name="gender" type="text" class="form-control up" value=""
                                                   placeholder="性别">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>出生日期<br/>  <!-- 出生日期 -->
                                            <input id="birthDate" name="birthDate" type="text"
                                                   class="form-control datepicker up"
                                                   value=""
                                                   placeholder="出生日期">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>国籍<br/>  <!-- 国籍 -->
                                            <input id="nationality" name="nationality" type="text"
                                                   class="form-control up"
                                                   value=""
                                                   placeholder="国籍">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>护照号<br/>  <!-- 护照号 -->
                                            <input id="passportNum" name="passportNum" type="text"
                                                   class="form-control up" value=""
                                                   placeholder="护照号">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>护照类型<br/>  <!-- 护照类型 -->
                                            <input id="passport_type" name="passport_type" type="text"
                                                   class="form-control up" value="ordinary"
                                                   placeholder="Ordinary">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>签发日期<br/>  <!-- 签发日期 -->
                                            <input id="passportDateIssue" name="passportDateIssue" type="text"
                                                   class="form-control up datepicker" value=""
                                                   placeholder="签发日期">
                                        </label>
                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-3">
                                        <label>有效期至<br/>  <!-- 有效期至 -->
                                            <input id="passportDateExpiry" name="passportDateExpiry" type="text"
                                                   class="form-control up datepicker" value=""
                                                   placeholder="有效期至">
                                        </label>
                                    </div>


                                </div>
                            </div>

                        </div>
                    </div>
                    <div style=" float: right; margin-top:1rem;">
                        <button onclick="sub()" class="btn btn-success btn-icon-split"><span class="icon text-white-50"> <i
                                class="fas fa-check"></i> </span>
                            <span class="text">确认提交</span>
                        </button>
                    </div>
                </div>
                <!-- 确认信息 end -->

            </div>
            <!-- End of Main Content -->

        </div>


    </div>
    {#    粘贴进来的文件end #}








    {#    <input name="fi" type="file" value="aaa">#}
    {#    <button name="bb" class="btn btn-danger up" onclick="f(this)">submit</button>#}
{% endblock %}
{% block js %}

    <script type="text/javascript" src="/static/js/bootstrap-datepicker.min.js" charset="UTF-8"></script>
    <script type="text/javascript" src="/static/js/bootstrap-datepicker.zh-CN.min.js" charset="UTF-8"></script>
    <script type="text/javascript">
        $(function () {
            $(".datepicker").datepicker({
                language: "zh-CN",
                autoclose: true,//选中之后自动隐藏日期选择框
                //clearBtn: true,//清除按钮
                //todayBtn: true,//今日按钮
                //format: "yyyy-mm-dd"//日期格式，详见 http://bootstrap-datepicker.readthedocs.org/en/release/options.html#format
                format: "dd/mm/yyyy",
                timeFormat: 'HH:mm:ss',//时间显示格式
                minView: 0,
                minuteStep: 1
            });
        });

        function sub() {
            let fd = new FormData();
            fd.append("p[0][_id]", "1",);
            fd.append("p[0][nationality]", $("#nationality").val());
            fd.append("p[0][passport_type]", $("#passport_type").val());
            fd.append("p[0][airport]", $("#airport").val());
            fd.append("p[0][salutation]", $("#salutation").val());
            fd.append("p[0][lastName]", $("#lastName").val());
            fd.append("p[0][middleName]", "");
            fd.append("p[0][firstName]", $("#firstName").val());
            fd.append("p[0][gender]", $("#gender").val());
            fd.append("p[0][birthDate]", $("#birthDate").val());
            fd.append("p[0][email]", $("#email").val());
            fd.append("p[0][mobileNumCountry]", $("#mobileNumCountry").val());
            fd.append("p[0][mobileNum]", $("#mobileNum").val());
            fd.append("p[0][passportNum]", $("#passportNum").val());
            fd.append("p[0][passportDateIssue]", $("#passportDateIssue").val());
            fd.append("p[0][passportDateExpiry]", $("#passportDateExpiry").val());
            fd.append("p[0][arrivalDate]", $("#arrivalDate").val());
            fd.append("p[0][arrivalTime]", $("#arrivalTime").val());
            fd.append("p[0][arrivalNum]", $("#arrivalNum").val());
            fd.append("p[0][departureDate]", $("#departureDate").val());
            fd.append("p[0][departureTime]", $("#departureTime").val());
            fd.append("p[0][departureNum]", $("#departureNum").val());
            fd.append("p[0][imagesUploaded][passportphoto][]", $("#passportphoto1").val());
            fd.append("p[0][imagesUploaded][passportphoto][]", $("#passportphoto2").val());
            fd.append("p[0][imagesUploaded][ticketphoto][]", $("#ticketphoto1").val());
            fd.append("p[0][imagesUploaded][ticketphoto][]", $("#ticketphoto2").val());
            fd.append("p[0][imagesUploaded][accomodationphoto][]", $("#accomodationphoto1").val());
            fd.append("p[0][accomodation][posType]", "hotel");
            fd.append("p[0][accomodation][posName]", "fdfg");
            fd.append("p[0][accomodation][posProvince]", "Chiang Mai");
            fd.append("p[0][accomodation][posDistrict]", "Mae Taeng");
            fd.append("p[0][accomodation][posSubDistrict]", "");
            fd.append("p[0][accomodation][posStreetAddress]", "");
            fd.append("p[0][accomodation][posPostCode]", "50150,50330");
            fd.append("p[0][residentialAddress]", "gety");
            fd.append("p[0][referenceNameAddr]", "");
            fd.append("p[0][minorInfo]", "");
            console.log(fd.keys());
            $.ajax({
                url: "https://www.evisathailand.com/fd",
                type: "post",
                dataType: "jsonp",
                data: fd,
                xhrFields: {withCredentials: true},
                contentType: false,
                processData: false,
                mimeType: "multipart/form-data",
                success: function (d) {
                    console.log(d)

                }
            });

        }

        function changepic(t) {
            let passport = $(t).attr("passport");
            console.log("changepic", passport);
            let that = t;
            let f = $(that)[0];
            let file = f.files[0];
            let name = f.name;
            if (!file) {
                alert("请先选择文件");
            }
            let formData = new FormData();
            formData.append("file", file);
            formData.append("name", name);
            if (passport) {
                formData.append("passport", true);
            }
            console.log(formData);
            $.ajax({
                url: "/upload/",
                type: "post",
                data: formData,
                xhrFields: {withCredentials: true},
                contentType: false,
                processData: false,
                mimeType: "multipart/form-data",
                success: function (data) {
                    data = JSON.parse(data);
                    console.log(data, Object.keys(data).length);
                    if (passport) {
                        console.log("this is passport");
                        if (Object.keys(data).length < 10) {
                            {#console.log("识别失败，请重新拍摄照片，保持画面清晰。");#}
                            alert("识别失败，请重新拍摄照片，保持画面清晰。");
                        } else {
                            $(that).parent().parent().next().show();
                            {#console.log("else");#}
                            {#console.log(data);#}
                            $("#lastName").val(data.last_name);
                            $("#firstName").val(data.first_name);
                            $("#salutation").val(data.sex);
                            $("#gender").val(data.sex);
                            $("#birthDate").val(data.birth_date.slice(6, 8) + "/" + data.birth_date.slice(4, 6) + "/" + data.birth_date.slice(0, 4));
                            $("#nationality").val(data.country.toLowerCase());
                            $("#passportNum").val(data.passport_no);
                            $("#passportDateIssue").val(data.issue_date.slice(6, 8) + "/" + data.issue_date.slice(4, 6) + "/" + data.issue_date.slice(0, 4));
                            $("#passportDateExpiry").val(data.expiry_date.slice(6, 8) + "/" + data.expiry_date.slice(4, 6) + "/" + data.expiry_date.slice(0, 4));
                            {#console.log("ret data", $(that).attr('name').slice(0,-2));#}
                            $(that).next().val(data[$(that).attr('name').slice(0, -2)][0]);
                            {#console.log($(that).next().val());#}
                        }
                    } else {
                        {#console.log("this is pic", data);#}
                        {#console.log(data[$(that).attr('name').slice(0,-2)][0]);#}
                        $(that).parent().parent().next().show();
                        $(that).next().val(data[$(that).attr('name').slice(0, -2)][0]);
                    }

                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

        // 上传图片
        function f(btn) {
            let that = btn;
            console.log($(that));
            let file = $(that).prev()[0].files[0];
            let formData = new FormData();
            formData.append('passport', file);
            console.log(formData);
            $.ajax({
                url: "/upload/",
                type: "post",
                data: formData,
                xhrFields: {withCredentials: true},
                contentType: false,
                processData: false,
                mimeType: "multipart/form-data",
                success: function (data) {
                    data = JSON.parse(data);
                    if (data.length < 9) {
                        alert("识别失败，请重新拍摄照片，保持画面清晰。")
                    } else {
                        // data = [ret.get("country"), firstname, lastname, ret.get("sex"), ret.get("birth_date"), ret.get("passport_no"),
                        //     ret.get("issue_date"),
                        //     ret.get("expiry_date")]
                        console.log(data);
                        // name="name" type="text" class="form-control" value="张三"></td>
                        //         <td><input name="last_name" type="text" class="form-control" value="张"></td>
                        //         <td><input name="first_name" type="text" class="form-control" value="三"></td>
                        //         <td><input name="salutation" type="text" class="form-control" value="女士"></td>
                        //         <td><input name="gender" type="text" class="form-control" value="女"></td>
                        //         <td><input name="birth_date" type="text" class="form-control" value="19/09/12"></td>
                        //         <td><input name="nationality" type="text" class="form-control" value="中国"></td>
                        //         <td><input name="passport_type" type="text" class="form-control" value="普通"></td>
                        //         <td><input name="passport_number" type="text" class="form-control" value="G890654356"></td>
                        //         <td><input name="passport_issue" type="text" class="form-control" value="12/09/14"></td>
                        //         <td><input name="passport_expiry
                        $("#name").val(data[2] + '.' + data[1]);
                        $("#last_name").val(data[2]);
                        $("#first_name").val(data[1]);
                        $("#salutation").val(data[3]);
                        $("#gender").val(data[3]);
                        $("#birth_date").val(data[4]);
                        $("#nationality").val(data[0]);
                        $("#passport_number").val(data[5]);
                        $("#passport_issue").val(data[6]);
                        $("#passport_expiry").val(data[7]);

                    }
                },
                error: function (data) {
                    console.log(data);
                }
            });

        }

        function saveUser2() {
            var id = $("#id").val().trim();
            var uname = $("#uname").val().trim();
            var pwd = $("#pwd").val().trim();
            var file = document.getElementById("file").files[0];
            var formData = new FormData();
            formData.append('id', id);
            formData.append('uname', uname);
            formData.append('pwd', pwd);
            formData.append('file', file);

            $.ajax({
                url: "/home/about",
                type: "post",
                data: formData,
                contentType: false,
                processData: false,
                mimeType: "multipart/form-data",
                success: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }

    </script>
{% endblock %}